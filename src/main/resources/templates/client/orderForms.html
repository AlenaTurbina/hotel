<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html" lang="en">
<head>
    <title>orderForm</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <!-- CSS -->
    <link th:href="@{/css/clientStyles/clientFormStyle.css}" rel="stylesheet">

    <!--JavaScript -->
    <script type="text/javascript"  th:src="@{/js/dateScrypt.js}"></script>

    <!-- Bootstrap. Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Bootstrap. Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Awesome fonts -->
    <script src="https://kit.fontawesome.com/5ea6f45e85.js" crossorigin="anonymous"></script>
</head>
<body>

<!-- Navbar -->
<div th:insert="/fragments/clientFragments :: navbarClientPages"></div>

<!-- Order forma -->
<div class="allPage">
    <div class="attention">
        <th th:text=" ${user.firstName} + ' ' + ${user.lastName} + '!' +
' We will be glad to see you among our guests!'">
        </th>
    </div>

    <div class="accordion accordionClient" id="accordionExample">
        <div class="accordion-item">
            <h2 class="accordion-header " id="headingOne">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                    MY ORDERS
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse" aria-labelledby="headingOne">
                <div class="accordion-body">
                    <div>
                        <!--
                    <div th:switch= tr th:each="orderBooking : ${orderBookings}" th:if="${orderBooking.client.id == user.id}">
                        <p th:case="null">
                        <h5>Yoy don't have any orders</h5>
                        </p>
                        <p th:case="*">
                        -->
                        <table class="tableClient">
                            <thead>
                            <!--        <th style="max-width: 20px;">id</th> -->
                            <th>Date</th>
                            <th>Date <br> arrival</th>
                            <th>Date <br> departure</th>
                            <th>First <br> name</th>
                            <th>Last <br> name</th>
                            <th>Quantity <br> persons</th>
                            <th>Room <br> type</th>
                            <th>Class <br> apartment</th>
                            <th>Optionals</th>
                            <th>Sum, $</th>
                            <th>Status</th>

                            <th></th>
                            </thead>
                            <tbody>
                            <tr th:each="orderBooking : ${orderBookings}" th:if="${orderBooking.client.id == user.id}">
                                <!--             <td th:utext="${orderBooking.id}"></td>       -->
                                <td th:utext="${orderBooking.date}"></td>
                                <td th:utext="${orderBooking.dateArrival}"></td>
                                <td th:utext="${orderBooking.dateDeparture}"></td>
                                <td th:utext="${orderBooking.client.firstName}"></td>
                                <td th:utext="${orderBooking.client.lastName}"></td>
                                <td th:utext="${orderBooking.quantityPersons}"></td>
                                <td th:utext="${orderBooking.room.roomKind.roomType.name}"></td>
                                <td th:utext="${orderBooking.room.roomKind.classApartment.name}"></td>

                                <td>
                                    <table class="optionalsTableClient">
                                        <tr>
                                            <td th:each="optional : ${orderBooking.optionals}"
                                                th:text="${optional.name} + '.'">
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td th:utext="${orderBooking.sumTotal}"></td>
                                <td th:utext="${orderBooking.orderStatus.name}"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div class="accordion-item">
            <h2 class="accordion-header" id="headingTwo">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    NEW ORDER
                </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo">
                <div class="accordion-body">
                    <div class="allPageCenter">
                        <h3>ORDER FORM</h3>
                        <h6>please, fill in the form fields</h6>
                    </div>
                    <div>
                        <form action="#" name="order" th:action="@{/client/orderForms}" th:object="${orderBookingDTO}"
                              method="post"  class="orderForm">
                            <p>
                                <input type="hidden" name="user" th:value="${user.id}">
                            </p>

                            <p>
                                <label for="dateArrival">Date arrival:</label>
                                <input id="dateArrival" type="date" th:value="*{dateArrival}" th:field="*{dateArrival}"
                                       required="required"/>
                            </p>
                            <p>
                                <label for="dateDeparture">Date departure:</label>
                                <input id="dateDeparture" type="date" th:value="*{dateDeparture}"
                                       th:field="*{dateDeparture}"
                                       required="required"/>

                            </p>
                            <p>
                                <label for="quantity">Quantity persons:</label>
                                <select id="quantity" th:field="*{quantityPersons}" required="required">
                                    <option value="">Select the number of adults</option>
                                    <option value="1">1 - one</option>
                                    <option value="2">2 - two</option>
                                    <option value="3">3 - three</option>
                                    <option value="4">4 - four</option>
                                </select>
                            </p>
                            <p>
                                <label for="roomType">Room type:</label>
                                <select id="roomType" th:field="*{roomType}" required="required">
                                    <option value="">Select type of room</option>
                                    <option th:each="roomType : ${roomTypes}"
                                            th:value="${roomType.id}"
                                            th:text="#{'description_'+${roomType.name}}">
                                    </option>
                                </select>
                            </p>
                            <p>
                                <label for="classApartments">Class apartment:</label>
                                <select id="classApartments" th:field="*{classApartment}" required="required">
                                    <option class="option1" value="">Select class of apartments</option>
                                    <option th:each="classApartment : ${classApartments}"
                                            th:value="${classApartment.id}"
                                            th:text="${classApartment.name}">
                                    </option>
                                </select>
                            </p>
                            <p>
                                <label for="optionals">Optionals:</label>
                            <ul>
                                <li th:each="optional : ${optionals}">
                                    <input id="optionals" type="checkbox" th:field="*{optionals}"
                                           th:value="${optional.id}"/>
                                    <label th:text="${optional.name}" ></label>
                                </li>
                            </ul>
                            </p>
                            <p><input type="submit" id="submitButton" value="Save"/>
                                <input type="reset" id="resetButton" value="Reset"/>
                            </p>
                        </form>
                        <script>
                            document.getElementById("dateArrival").setAttribute("min", dateStrict(0));
                            document.getElementById("dateArrival").setAttribute("max", dateStrict(180));
                            document.getElementById("dateDeparture").setAttribute("min", dateStrict(1));
                            document.getElementById("dateDeparture").setAttribute("max", dateStrict(211));
                        </script>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>